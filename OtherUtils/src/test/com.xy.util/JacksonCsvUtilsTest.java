package com.xy.util;

import org.junit.Assert;
import org.junit.Test;
import org.junit.Before; 
import org.junit.After;

import java.io.IOException;
import java.util.List;

import static com.xy.util.JacksonCsvUtils.csvStrToBean;

/** 
* JacksonCsvUtils Tester. 
* 
* @author <Authors name> 
* @since <pre>七月 15, 2017</pre> 
* @version 1.0 
*/ 
public class JacksonCsvUtilsTest { 

@Before
public void before() throws Exception { 
} 

@After
public void after() throws Exception { 
}

/** 
* 
* Method: csvFileToBean(String fileName, String fileEncoding, Class<T> cls) 
* 
*/ 
@Test
public void testCsvFileToBean() throws Exception {

    //        try {
//            List<Map> ss =  new JacksonCsvUtils().csvToBean("//Users//xy//Downloads//test.csv","GBK" , Map.class);
//
//            System.out.print(ss);
//        } catch (IOException e) {
//            e.printStackTrace();
//        }

}

/** 
* 
* Method: csvStrToBean(String csvData, Class<T> cls) 
* 
*/ 
@Test
public void testCsvStrToBean() throws Exception {

    String data = "交易时间,公众账号ID,商户号,子商户号,设备号,微信订单号,商户订单号,用户标识,交易类型,交易状态,付款银行,货币种类,总金额,企业红包金额,微信退款单号,商户退款单号,退款金额,企业红包退款金额,退款类型,退款状态,商品名称,商户数据包,手续费,费率\n" +
            "`2017-06-29 02:44:23,`wx0b39511947bc2fdd,`10029052,`1283658901,`51013880,`4000162001201706297908732550,`100014963520170629000000350002,`oXVfktwroXV0xxUBBTOB5JWVbUZg,`NATIVE,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000603262017062901307036033,`0244220002,`0.01,`0.00,`ORIGINAL,`SUCCESS,`测试,`83267,`0.00000,`0.60%\n" +
            "`2017-06-29 02:44:05,`wx0b39511947bc2fdd,`10029052,`1283658901,`51013880,`4000162001201706297908732550,`100014963520170629000000350002,`oXVfktwroXV0xxUBBTOB5JWVbUZg,`NATIVE,`SUCCESS,`CFT,`CNY,`0.01,`0.00,`0,`0,`0.00,`0.00,`,`,`测试,`83267,`0.00000,`0.60%\n" +
            "`2017-06-29 02:47:01,`wx0b39511947bc2fdd,`10029052,`1283658901,`51013880,`4000162001201706297908791467,`100014963520170629000000370002,`oXVfktwroXV0xxUBBTOB5JWVbUZg,`MICROPAY,`SUCCESS,`CFT,`CNY,`0.01,`0.00,`0,`0,`0.00,`0.00,`,`,`测试,`83267,`0.00000,`0.60%\n" +
            "`2017-06-29 02:47:13,`wx0b39511947bc2fdd,`10029052,`1283658901,`51013880,`4000162001201706297908791467,`100014963520170629000000370002,`oXVfktwroXV0xxUBBTOB5JWVbUZg,`MICROPAY,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000303312017062901307203787,`0247130002,`0.01,`0.00,`ORIGINAL,`SUCCESS,`测试,`83267,`0.00000,`0.60%\n" +
            "`2017-06-29 10:54:41,`wx0b39511947bc2fdd,`10029052,`1283658901,`16310001,`4002952001201706297936936423,`16310001170629105504,`oXVfkty1j_M6wBs4Zh6op2WO2adY,`MICROPAY,`SUCCESS,`SPDB_CREDIT,`CNY,`0.01,`0.00,`0,`0,`0.00,`0.00,`,`,`河马付测试,`83267,`0.00000,`0.60%\n" +
            "`2017-06-29 10:55:52,`wx0b39511947bc2fdd,`10029052,`1283658901,`16310001,`4002952001201706297936936423,`16310001170629105504,`oXVfkty1j_M6wBs4Zh6op2WO2adY,`MICROPAY,`REFUND,`SPDB_CREDIT,`CNY,`0.00,`0.00,`50000703272017062901308215311,`16310001170629105615,`0.01,`0.00,`ORIGINAL,`PROCESSING,`河马付测试,`83267,`0.00000,`0.60%\n" +
            "`2017-06-29 09:08:36,`wx0b39511947bc2fdd,`10029052,`1283658901,`16310001,`4005232001201706297919697080,`16310001170629090755,`oXVfktzi-N6kTyEVRoruHOK5nHCw,`MICROPAY,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000003442017062901307361259,`16310001170629090833,`0.01,`0.00,`ORIGINAL,`SUCCESS,`河马付测试,`83267,`0.00000,`0.60%\n" +
            "`2017-06-29 09:07:58,`wx0b39511947bc2fdd,`10029052,`1283658901,`16310001,`4005232001201706297919697080,`16310001170629090755,`oXVfktzi-N6kTyEVRoruHOK5nHCw,`MICROPAY,`SUCCESS,`CFT,`CNY,`0.01,`0.00,`0,`0,`0.00,`0.00,`,`,`河马付测试,`83267,`0.00000,`0.60%\n" +
            "`2017-06-29 09:05:45,`wx0b39511947bc2fdd,`10029052,`1283658901,`16310001,`4005232001201706297921416752,`16310001170629090507,`oXVfktzi-N6kTyEVRoruHOK5nHCw,`MICROPAY,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000003362017062901307912501,`16310001170629090542,`0.01,`0.00,`ORIGINAL,`SUCCESS,`河马付测试,`83267,`0.00000,`0.60%\n" +
            "`2017-06-29 09:05:10,`wx0b39511947bc2fdd,`10029052,`1283658901,`16310001,`4005232001201706297921416752,`16310001170629090507,`oXVfktzi-N6kTyEVRoruHOK5nHCw,`MICROPAY,`SUCCESS,`CFT,`CNY,`0.01,`0.00,`0,`0,`0.00,`0.00,`,`,`河马付测试,`83267,`0.00000,`0.60%\n" +
            "`2017-06-29 09:09:39,`wx0b39511947bc2fdd,`10029052,`1283658901,`16310001,`4005232001201706297921549288,`16310001170629090906,`oXVfktzi-N6kTyEVRoruHOK5nHCw,`MICROPAY,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000003282017062901307910699,`16310001170629090935,`0.01,`0.00,`ORIGINAL,`SUCCESS,`河马付测试,`83267,`0.00000,`0.60%\n" +
            "`2017-06-29 09:09:09,`wx0b39511947bc2fdd,`10029052,`1283658901,`16310001,`4005232001201706297921549288,`16310001170629090906,`oXVfktzi-N6kTyEVRoruHOK5nHCw,`MICROPAY,`SUCCESS,`CFT,`CNY,`0.01,`0.00,`0,`0,`0.00,`0.00,`,`,`河马付测试,`83267,`0.00000,`0.60%\n" +
            "`2017-06-29 08:45:32,`wx0b39511947bc2fdd,`10029052,`1283658901,`16310001,`4005232001201706297924477357,`16310001170629084529,`oXVfktzi-N6kTyEVRoruHOK5nHCw,`MICROPAY,`SUCCESS,`CFT,`CNY,`0.01,`0.00,`0,`0,`0.00,`0.00,`,`,`河马付测试,`83267,`0.00000,`0.60%\n" +
            "`2017-06-29 08:46:05,`wx0b39511947bc2fdd,`10029052,`1283658901,`16310001,`4005232001201706297924477357,`16310001170629084529,`oXVfktzi-N6kTyEVRoruHOK5nHCw,`MICROPAY,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000503332017062901307888529,`16310001170629084601,`0.01,`0.00,`ORIGINAL,`SUCCESS,`河马付测试,`83267,`0.00000,`0.60%\n" +
            "`2017-06-29 09:44:33,`wx0b39511947bc2fdd,`10029052,`1283658901,`11160050,`4006492001201706297926815821,`11160050170629094318,`oXVfkt39Ke5is7Xvn5Hvy2_K1EAI,`MICROPAY,`SUCCESS,`CFT,`CNY,`0.01,`0.00,`0,`0,`0.00,`0.00,`,`,`武汉医疗测试终端,`123,`0.00000,`0.60%\n" +
            "`2017-06-29 15:18:21,`wx0b39511947bc2fdd,`10029052,`1283658901,`0,`4008962001201706297978511072,`10012017062900552463701848886,`oXVfkt-jqhoZpTvEALDAjhzjRbQI,`MICROPAY,`SUCCESS,`CMB_CREDIT,`CNY,`0.10,`0.00,`0,`0,`0.00,`0.00,`,`,`10012017062900552463701848886,`,`0.00000,`0.60%\n" +
            "`2017-06-29 15:19:09,`wx0b39511947bc2fdd,`10029052,`1283658901,`0,`4008962001201706297978511072,`10012017062900552463701848886,`oXVfkt-jqhoZpTvEALDAjhzjRbQI,`MICROPAY,`REFUND,`CMB_CREDIT,`CNY,`0.00,`0.00,`50000003202017062901309472539,`10012017062900552944031848893,`0.10,`0.00,`ORIGINAL,`SUCCESS,`10012017062900552463701848886,`,`0.00000,`0.60%\n" +
            "`2017-06-29 01:10:38,`wx0b39511947bc2fdd,`10029052,`1283658901,`21940001,`4010042001201706297898034917,`10001720752017062900000029W,`oXVfkt6VyQZCP1Y6RkucuyKkX_Nk,`NATIVE,`SUCCESS,`CFT,`CNY,`2.00,`0.00,`0,`0,`0.00,`0.00,`,`,`麦申602店,`001,`0.01000,`0.60%\n" +
            "`2017-06-29 01:11:12,`wx0b39511947bc2fdd,`10029052,`1283658901,`21940001,`4010042001201706297898034917,`10001720752017062900000029W,`oXVfkt6VyQZCP1Y6RkucuyKkX_Nk,`NATIVE,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000503252017062901307427750,`10001720752017062900000029W011110,`2.00,`0.00,`ORIGINAL,`SUCCESS,`麦申602店,`001,`-0.01000,`0.60%\n" +
            "`2017-06-29 01:06:19,`wx0b39511947bc2fdd,`10029052,`1283658901,`21940001,`4010042001201706297899805937,`10001720752017062900000027W,`oXVfkt6VyQZCP1Y6RkucuyKkX_Nk,`NATIVE,`SUCCESS,`CFT,`CNY,`0.01,`0.00,`0,`0,`0.00,`0.00,`,`,`麦申602店,`001,`0.00000,`0.60%\n" +
            "`2017-06-29 01:06:50,`wx0b39511947bc2fdd,`10029052,`1283658901,`21940001,`4010042001201706297899805937,`10001720752017062900000027W,`oXVfkt6VyQZCP1Y6RkucuyKkX_Nk,`NATIVE,`REFUND,`CFT,`CNY,`0.00,`0.00,`50000103372017062901307009451,`10001720752017062900000027W010648,`0.01,`0.00,`ORIGINAL,`SUCCESS,`麦申602店,`001,`0.00000,`0.60%\n" +
            "总交易单数,总交易额,总退款金额,总企业红包退款金额,手续费总金额\n" +
            "`21,`2.19,`2.18,`0.00,`0.00000";


        List<WechatBillFile> list = csvStrToBean(data, WechatBillFile.class);
        Assert.assertNotNull(list);
        System.out.println(list);
} 


} 
